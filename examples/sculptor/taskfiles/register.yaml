version: "3"

vars:
  TARGET_DIR: "{{.DATA_DIR}}/{{.TARGET}}/{{.STAGE}}"

tasks:
  CT2mesh:
    cmds:
      - echo "{{.DATA_DIR}}" "{{.TARGET}}" "{{.STAGE}}"
      - echo "{{.TARGET_DIR}}"
      - python "{{.CMD_DIR}}/CT2mesh.py" --component "{{.COMPONENT}}" "00-CT" "01-{{.COMPONENT}}.ply"
    sources:
      - 00-CT/*
    generates:
      - 01-{{.COMPONENT}}.ply
    requires:
      vars:
        - CMD_DIR
        - COMPONENT
        - DATA_DIR
        - STAGE
        - TARGET
        - TARGET_DIR
    dir: "/{{.TARGET_DIR}}"
